<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="post">

	<select id="findById" parameterType="Long" resultType="postvo">
		<choose>
			<when test="no != 99999">
				<![CDATA[
				select no, title, contents, reg_date, category_no, user_id
				  from post
				 where user_id=#{id }
				]]>
			</when>
			<otherwise>
				<![CDATA[
				select no, title, contents, reg_date, category_no, user_id
		          from post
		         order by reg_date
                 limit 1;
				]]>
			</otherwise>
		</choose>
	</select>

	<select id="findAllById" parameterType="string" resultType="postvo">
		<![CDATA[
		select no, title, contents, reg_date, category_no, user_id
		  from post
		 where user_id=#{id }
		]]>
	</select>

	<insert id="insert" parameterType="postvo">
		<![CDATA[
		insert
		  into post
		values ( null,
				 #{title },
				 #{contents },
				 now(),
				 #{category_no },
				 #{user_id })
		]]>
	</insert>

</mapper>